{
	"name": "BlitzMax",
	"scopeName": "source.bmx",
	"patterns": [
		{
			"include": "#comment"
		},
		{
			"include": "#string"
		},
		{
			"include": "#keyword"
		},
		{
			"include": "#storage"
		},
		{
			"include": "#type-name"
		},
		{
			"include": "#function-name"
		}
	],
	"repository": {
		"comment": {
			"patterns": [
				{
					"include": "#comment-line"
				},
				{
					"include": "#comment-block"
				}
			]
		},
		"pre-compilation": {
			"begin": "@bmk\\b",
			"end": "(?=\n)",
			"beginCaptures": {
				"0": {
					"name": "support.script.start.bmx"
				}
			},
			"name": "support.script.bmx"
		},
		"comment-line": {
			"begin": "'",
			"end": "(?=\n)",
			"beginCaptures": {
				"0": {
					"name": "comment.line.apostrophe.begin.bmx"
				}
			},
			"name": "comment.line.apostrophe",
			"patterns": [
				{
					"include": "#pre-compilation"
				}
			]
		},
		"comment-block": {
			"begin": "(?i)^\\s*rem\\b(?:\\s*$|\\s+.*)",
			"end": "(?i)^\\s*end\\s?rem\\b\\s*",
			"beginCaptures": {
				"0": {
					"name": "comment.block.begin.bmx"
				}
			},
			"endCaptures": {
				"0": {
					"name": "comment.block.end.bmx"
				}
			},
			"name": "comment.block.bmx"
		},
		"string": {
			"begin": "\"",
			"end": "\"",
			"beginCaptures": {
				"0": {
					"name": "punctuation.definition.string.begin.bmx"
				}
			},
			"endCaptures": {
				"0": {
					"name": "punctuation.definition.string.end.bmx"
				}
			},
			"name": "string.quoted.double.bmx"
		},
		"keyword": {
			"patterns": [
				{
					"include": "#framework"
				},
				{
					"include": "#import"
				},
				{
					"include": "#include"
				},
				{
					"include": "#if-then-else-endif"
				},
				{
					"include": "#try-catch-finally-endtry"
				},
				{
					"include": "#for-while-until"
				},
				{
					"include": "#select-case"
				},
				{
					"include": "#operator"
				},
				{
					"include": "#control"
				}
			]
		},
		"module-name": {
			"match": "\\w+\\.\\w+",
			"name": "variable.module.bmx"
		},
		"framework": {
			"begin": "(?i)\\b(framework)\\b",
			"end": "(?=\\s+|\\W+)",
			"beginCaptures": {
				"0": {
					"name": "keyword.control.import.bmx"
				}
			},
			"patterns": [
				{
					"include": "#module-name"
				}
			]
		},
		"import": {
			"begin": "(?i)\\b(import)\\b",
			"end": "(?=\\s+|\\W+)",
			"beginCaptures": {
				"0": {
					"name": "keyword.control.import.bmx"
				}
			},
			"patterns": [
				{
					"include": "#module-name"
				}
			]
		},
		"include": {
			"match": "(?i)\\b(include)\\b",
			"name": "keyword.control.include.bmx"
		},
		"if-then-else-endif": {
			"match": "(?i)\\b(if|then|else\\s*if|else|end\\s*if)\\b",
			"name": "keyword.control.conditional.bmx"
		},
		"try-catch-finally-endtry": {
			"match": "(?i)\\b(try|catch|finally|end\\s*try)\\b\\s*",
			"name": "keyword.control.trycatch.bmx"
		},
		"for-while-until": {
			"match": "(?i)\\b(for|next|while|end\\s*while|wend|to|step|eachin|repeat|until|forever)\\b",
			"name": "keyword.control.loop.bmx"
		},
		"select-case": {
			"match": "(?i)\\b(select|case|end\\s*select|default)\\b",
			"name": "keyword.control.conditional.switch.bmx"
		},
		"operator": {
			"match": "(?i)(\\+|\\-|\\^|\\/|\\|\\bmod\\b|\\bshl\\b|\\bshr\\b|\\bsar\\b|\\&|\\||\\~|\\=|\\<\\>|\\<|\\>|\\<\\=|\\=\\>)",
			"name": "keyword.operator.bmx"
		},
		"control": {
			"match": "(?i)\\b(and|or|not)\\b",
			"name": "keyword.control.bmx"
		},
		"storage": {
			"patterns": [
				{
					"include": "#storage-modifier"
				},
				{
					"include": "#type"
				},
				{
					"include": "#type-end"
				},
				{
					"include": "#function"
				},
				{
					"include": "#function-end"
				},
				{
					"include": "#method"
				},
				{
					"include": "#method-end"
				}
			]
		},
		"storage-modifier": {
			"match": "(?i)\\b(extends|implements|abstract|final|export|override|where|public|private|protected|extern|end\\s*extern)\\b",
			"name": "storage.modifier.bmx"
		},
		"type-name": {
			"patterns": [
				{
					"include": "#type-name-support"
				},
				{
					"include": "#type-name-custom"
				},
				{
					"include": "#type-name-tag"
				}
			]
		},
		"type-name-support": {
			"match": "(?i)(?<=:\\s*(\\w+\\s+)?|new\\s+)(var|ptr|object|byte|short|int|uint|long|ulong|float|double|string|size_t|float64|int128|float128|double128|typename|elementtype|tblitzexception|tnullobjectexception|tnullmethodexception|tnullfunctionexception|tarrayboundsexception|toutofdataexception|truntimeexception|tinvalidenumexception|iiterable|iiterator|idisposable|lparam|wparam)\\b",
			"name": "support.type.bmx"
		},
		"type-name-custom": {
			"match": "(?i)(?<=:\\s*(\\w+\\s+)?|new\\s+)\\w+",
			"name": "entity.name.class.bmx"
		},
		"type-name-tag": {
			"match": "(?<=\\w+\\s*(\\w+\\s+)?|new\\s+)(\\%|\\#|\\!|\\$)",
			"name": "entity.name.class.bmx"
		},
		"type-name-word": {
			"match": "[aA-zZ]\\w*",
			"name": "entity.name.class.bmx"
		},
		"type-end": {
			"match": "(?i)\\bend\\s*type\\b",
			"name": "storage.class.bmx"
		},
		"type": {
			"begin": "(?i)\\btype\\b",
			"end": "(?=\\;|\\n|\\')",
			"beginCaptures": {
				"0": {
					"name": "storage.class.bmx"
				}
			},
			"patterns": [
				{
					"include": "#storage-modifier"
				},
				{
					"include": "#type-name-word"
				}
			]
		},
		"function-name": {
			"patterns": [
				{
					"include": "#function-name-certain"
				},
				{
					"include": "#function-name-guess"
				},
				{
					"include": "#function-name-single"
				}
			]
		},
		"function-name-certain": {
			"match": "(?i)(?<!new\\s+)\\b(?<!:\\s*)\\w+(?=(\\s*:\\s*\\w+|\\%|\\#|\\!|\\$)\\s*\\(|\\s*\\()\\b",
			"name": "entity.name.function.bmx"
		},
		"function-name-guess": {
			"match": "(?i)(?<=^\\s*|\\W+)(\\w+)\\b\\s+(?!\\.|\\,|then|else|and|or|not)(?=(\\w+|\"))",
			"name": "entity.name.function.guess.bmx"
		},
		"function-name-single": {
			"match": "(?<=^\\s*|;\\s*)(\\w+)\\s*(?=$|'.*)",
			"name": "entity.name.function.guess.bmx"
		},
		"function-end": {
			"match": "(?i)\\bend\\s*function\\b",
			"name": "storage.function.end.bmx"
		},
		"function": {
			"match": "(?i)\\bfunction\\b",
			"name": "storage.function.begin.bmx"
		},
		"method-end": {
			"match": "(?i)\\bend\\s*method\\b",
			"name": "storage.method.end.bmx"
		},
		"method": {
			"match": "(?i)\\bmethod\\b",
			"name": "storage.method.begin.bmx"
		}
	}
}